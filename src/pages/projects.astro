---
import "../styles/global.css";
const BASE = import.meta.env.BASE_URL || '/';
const norm = (p) => {
  if (!p) return BASE;
  const b = BASE.endsWith('/') ? BASE : BASE + '/';
  return b === '/' ? (p.startsWith('/') ? p : '/' + p) : b.replace(/\/$/, '') + (p.startsWith('/') ? p : '/' + p);
};
const homeHref = norm('/');
const projectsHref = norm('/projects');
const aboutHref = norm('/about');
const p1 = norm('/images/project01-thumb.png');
const p2 = norm('/images/project02-thumb.png');
const p3 = norm('/images/project03-thumb.png');
const p4 = norm('/images/project04-thumb.png');
const house1Href = norm('/projects/house-1');
const house2Href = norm('/projects/house-2');
const room1Href = norm('/projects/room-1');
const castle1Href = norm('/projects/castle-1');
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>CONTENTS â€” Projects</title>

    <!-- GSAP -->
    <script is:inline src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script is:inline src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
  </head>

  <body>
    <nav class="center-nav">
      <a href={homeHref}>Home</a>
      <a href={projectsHref}>Projects</a>
      <a href={aboutHref}>About</a>
    </nav>

    <main class="container">
      <h1 class="title">CONTENTS</h1>

      <section class="projects">
        <a href={house1Href} class="project">
          <span class="project-number">01.</span>
          <div class="meta">
            <span class="category">Residential Project | Islamabad</span>
            <span class="title-year">House 1 (2017)</span>
            <span class="location">F-8/3, Islamabad, Pakistan</span>
          </div>
          <img class="project-image" src={p1} alt="House 1" />
        </a>

        <a href={house2Href} class="project">
          <span class="project-number">02.</span>
          <div class="meta">
            <span class="category">Residential Renovation | Islamabad</span>
            <span class="title-year">House 2 (2017)</span>
            <span class="location">G-6/4, Islamabad, Pakistan</span>
          </div>
          <img class="project-image" src={p2} alt="House 2" />
        </a>

        <a href={room1Href} class="project">
          <span class="project-number">03.</span>
          <div class="meta">
            <span class="category">Multi-Unit Housing | Islamabad</span>
            <span class="title-year">Room 1 (2018)</span>
            <span class="location">I-10 Sector, Islamabad, Pakistan</span>
          </div>
          <img class="project-image" src={p3} alt="Room 1" />
        </a>

        <a href={castle1Href} class="project">
          <span class="project-number">04.</span>
          <div class="meta">
            <span class="category">Civic / Cultural | Islamabad</span>
            <span class="title-year">Castle 1 (2019)</span>
            <span class="location">Shakarparian Hills, Islamabad, Pakistan</span>
          </div>
          <img class="project-image" src={p4} alt="Castle 1" />
        </a>
      </section>

      <div class="footer-space"></div>
    </main>

    <!-- GSAP ONLY (NO LENIS) -->
    <script is:inline>
      gsap.registerPlugin(ScrollTrigger);

      /* Page load: CONTENTS title */
      gsap.from(".title", {
        opacity: 0,
        y: 20,
        duration: 1,
        ease: "power2.out"
      });

      // Reveal all projects together on load
      gsap.from(".project", {
        opacity: 0,
        y: 20,
        duration: 0.9,
        ease: "power2.out",
        stagger: 0
      });

      /* Hover interaction */
      document.querySelectorAll(".project").forEach((project) => {
        const image = project.querySelector(".project-image");

        project.addEventListener("mouseenter", () => {
          gsap.to(image, {
            scale: 1.03,
            duration: 0.6,
            ease: "power2.out"
          });
        });
        

        project.addEventListener("mouseleave", () => {
          gsap.to(image, {
            scale: 1,
            duration: 0.6,
            ease: "power2.out"
          });
        });
      });
    </script>
  </body>
</html>
