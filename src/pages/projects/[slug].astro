---
import "../../styles/global.css";

export async function getStaticPaths() {
  return [
    {
      params: { slug: 'house-1' },
      props: {
        title: 'House 1',
        year: '2017',
        location: 'F-8/3, Islamabad, Pakistan',
        type: 'Residential Project | Built',
        description: 'A compact residential project in Islamabad focusing on local climate, natural ventilation and layered indoor-outdoor living.',
        hero: '/arch-portfolio/images/project01-thumb.png',
        images: ['/arch-portfolio/images/project01-thumb.png', '/arch-portfolio/images/project01-thumb.png'],
        model: '/arch-portfolio/models/project01_desktop.glb'
      }
    },
    {
      params: { slug: 'house-2' },
      props: {
        title: 'House 2',
        year: '2017',
        location: 'G-6/4, Islamabad, Pakistan',
        type: 'Residential Renovation | Renovated',
        description: 'A renovation project in Islamabad that reconfigures existing spaces to improve daylighting, privacy and thermal comfort while respecting the original structure.',
        hero: '/arch-portfolio/images/project02-thumb.png',
        images: ['/arch-portfolio/images/project02-thumb.png', '/arch-portfolio/images/project02-thumb.png'],
        model: '/arch-portfolio/models/project02_desktop.glb'
      }
    },
    {
      params: { slug: 'room-1' },
      props: {
        title: 'Room 1',
        year: '2018',
        location: 'I-10 Sector, Islamabad, Pakistan',
        type: 'Multi-Unit Housing | Concept',
        description: 'A multi-unit housing concept exploring compact living and shared amenities suited to Islamabad suburbs.',
        hero: '/arch-portfolio/images/project03-thumb.png',
        images: ['/arch-portfolio/images/project03-thumb.png', '/arch-portfolio/images/project03-thumb.png'],
        model: '/arch-portfolio/models/project03_desktop.glb'
      }
    },
    {
      params: { slug: 'castle-1' },
      props: {
        title: 'Castle 1',
        year: '2019',
        location: 'Shakarparian Hills, Islamabad, Pakistan',
        type: 'Civic / Cultural | Built',
        description: 'A cultural pavilion sited on a hilltop, designed as a landmark gathering place responding to Islamabad\'s landscape and public program needs.',
        hero: '/arch-portfolio/images/project04-thumb.png',
        images: ['/arch-portfolio/images/project04-thumb.png', '/arch-portfolio/images/project04-thumb.png'],
        model: '/arch-portfolio/models/project04_desktop.glb'
      }
    }
  ];
}

const { title, year, location, type, description, hero, images, model } = Astro.props;
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title} â€” Portfolio</title>
    <script is:inline src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script is:inline src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
  </head>
  <body>
    <nav class="center-nav">
      <a href="/arch-portfolio/">Home</a>
      <a href="/arch-portfolio/projects">Projects</a>
      <a href="/arch-portfolio/about">About</a>
    </nav>

    <div class="project-intro">
      <section class="project-header">
        <h1 class="project-title">{title}</h1>
        <div class="project-meta">
          <div class="project-meta-item">
            <span class="project-meta-label">Year</span>
            <span class="project-meta-value">{year}</span>
          </div>
          <div class="project-meta-item">
            <span class="project-meta-label">Location</span>
            <span class="project-meta-value">{location}</span>
          </div>
          <div class="project-meta-item">
            <span class="project-meta-label">Type</span>
            <span class="project-meta-value">{type}</span>
          </div>
        </div>
        <p class="project-description">{description}</p>
      </section>

      <model-viewer
        src={model}
        alt={`3D model of ${title}`}
        camera-controls
        auto-rotate
        shadow-intensity="1"
        style="width: 100%; height: 70vh;"
      ></model-viewer>
    </div>

    <section class="project-images">
      {images.map((img) => (
        <img src={img} alt={title} />
      ))}
    </section>

    <script is:inline>
      // Register GSAP plugins
      gsap.registerPlugin(ScrollTrigger);

      // Hero image fade in
      gsap.from('.project-hero', {
        opacity: 0,
        duration: 1.5,
        ease: 'power2.out'
      });

      // Metadata slides up
      gsap.from('.project-header', {
        opacity: 0,
        y: 30,
        duration: 1.2,
        delay: 0.3,
        ease: 'power2.out'
      });

      // Images reveal sequentially on scroll
      const projectImages = document.querySelectorAll('.project-images img');
      projectImages.forEach((img) => {
        gsap.from(img, {
          scrollTrigger: {
            trigger: img,
            start: 'top 75%',
            once: true
          },
          opacity: 0,
          y: 40,
          duration: 1,
          ease: 'power2.out'
        });
      });
    </script>
  </body>
</html>
